import{z as e}from"zod";import{WalletAddress as t}from"./core.mjs";import{CustomOAuthProviderID as i}from"./oauth-custom.mjs";import{SmartWalletProvider as r}from"./smart-wallet-config.mjs";import{CurveSigningChainTypes as l}from"./wallet-api/wallets/index.mjs";import"bs58";import"libphonenumber-js/max";import"viem";import"../constants/smart-wallets.mjs";import"@privy-io/api-base";import"./api.mjs";import"./transaction.mjs";import"./wallet-api/export.mjs";import"./wallet-api/wallets/spark/index.mjs";import"./wallet-api/wallets/spark/utils.mjs";const n=e.object({type:e.literal("email"),address:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),a=e.object({type:e.literal("phone"),number:e.string().optional(),phoneNumber:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),s=e.object({type:e.enum(["wallet","smart_wallet"]),address:e.string(),chain_type:e.enum(["solana","ethereum"])}),o=e.object({type:e.literal("wallet"),address:e.string(),chain_id:e.string().optional(),chain_type:e.literal("ethereum"),wallet_client:e.literal("unknown"),wallet_client_type:e.string().optional(),connector_type:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),u=e.object({type:e.literal("smart_wallet"),address:e.string(),smart_wallet_type:r,smart_wallet_version:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),_=e.object({type:e.literal("wallet"),address:e.string(),chain_type:e.literal("solana"),wallet_client:e.literal("unknown"),wallet_client_type:e.string().optional(),connector_type:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),b=e.object({type:e.literal("farcaster"),fid:e.number(),owner_address:t,username:e.string().optional(),display_name:e.string().optional(),bio:e.string().optional(),profile_picture:e.string().optional(),profile_picture_url:e.string().optional(),homepage_url:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable(),signer_public_key:e.string().optional()}),m=e.object({type:e.literal("passkey"),created_with_browser:e.string().optional(),created_with_os:e.string().optional(),created_with_device:e.string().optional(),credential_id:e.string(),authenticator_name:e.string().optional(),public_key:e.string().optional(),enrolled_in_mfa:e.boolean(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),p=e.object({type:e.literal("telegram"),telegram_user_id:e.string(),first_name:e.string().nullish(),last_name:e.string().nullish(),username:e.string().nullish(),photo_url:e.string().nullish(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}).transform((e=>({...e,telegramUserId:e.telegram_user_id,...void 0!==e.first_name?{firstName:e.first_name}:{}})));let d=e.enum(["privy","user-passcode","google-drive","icloud","recovery-encryption-key","privy-v2"]),c=e.object({id:e.string().nullable().default(null),type:e.literal("wallet"),address:e.string(),imported:e.boolean().default(!1),delegated:e.boolean().default(!1),wallet_index:e.number(),chain_id:e.string(),chain_type:e.string(),wallet_client:e.literal("privy"),wallet_client_type:e.literal("privy"),connector_type:e.literal("embedded"),recovery_method:d,verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()});const f=c.merge(e.object({chain_type:e.literal("ethereum")})),g=c.merge(e.object({chain_type:e.literal("solana"),public_key:e.string()})),v=c.merge(e.object({chain_type:e.literal("bitcoin-segwit"),public_key:e.string()})),y=c.merge(e.object({chain_type:e.literal("bitcoin-taproot"),public_key:e.string()})),j=c.merge(e.object({chain_type:l,public_key:e.string()}));let h=e.object({id:e.string(),recovery_method:e.literal("privy-v2")});const w=e.union([f.merge(h),g.merge(h),v.merge(h),y.merge(h),j.merge(h)]),k=e.object({type:e.literal("google_oauth"),subject:e.string(),email:e.string(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),x=e.object({type:e.literal("twitter_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),profile_picture_url:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),z=e.object({type:e.literal("discord_oauth"),subject:e.string(),username:e.string().nullable(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),N=e.object({type:e.literal("github_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),I=e.object({type:e.literal("linkedin_oauth"),subject:e.string(),name:e.string().optional(),email:e.string().nullable(),vanity_name:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),U=e.object({type:e.literal("spotify_oauth"),subject:e.string(),email:e.string().nullable(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),V=e.object({type:e.literal("instagram_oauth"),subject:e.string(),username:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),q=e.object({type:e.literal("tiktok_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),A=e.object({type:e.literal("line_oauth"),subject:e.string(),name:e.string().nullable(),email:e.string().nullable(),profile_picture_url:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),B=e.object({type:e.literal("twitch_oauth"),subject:e.string(),username:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),C=e.object({type:e.literal("apple_oauth"),subject:e.string(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),D=e.object({type:i,subject:e.string(),name:e.string().optional(),username:e.string().optional(),email:e.string().optional(),profile_picture_url:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),E=e.object({type:e.literal("custom_auth"),custom_user_id:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),F=e.object({address:e.string()}),G=e.object({address:e.string()}),H=e.object({type:e.literal("cross_app"),subject:e.string(),provider_app_id:e.string(),embedded_wallets:e.array(F),smart_wallets:e.array(G),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),J=e.object({type:e.literal("authorization_key"),public_key:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),K=e.union([n,a,o,_,u,f,g,v,y,j,k,x,z,N,U,V,q,A,B,I,C,D,E,b,m,p,H,J]),L=e.object({type:e.literal("sms"),verified_at:e.number()}),M=e.object({type:e.literal("totp"),verified_at:e.number()}),O=e.object({type:e.literal("passkey"),verified_at:e.number()}),P=e.union([L,M,O]),Q=e.record(e.string(),e.union([e.string(),e.number(),e.boolean()])),R=e.object({provider:e.string(),access_token:e.string(),access_token_expires_in_seconds:e.number().optional(),refresh_token:e.string().optional(),refresh_token_expires_in_seconds:e.number().optional(),scopes:e.array(e.string()).optional()}),S=e.object({id:e.string(),linked_accounts:e.array(K),mfa_methods:e.array(P),created_at:e.number(),has_accepted_terms:e.boolean(),is_guest:e.boolean(),custom_metadata:Q.optional()}),T=e.enum(["set","ignore","clear"]),W=e.object({user:S,identity_token:e.string().min(1).nullable()}),X=e.object({user:S,token:e.string().min(1).nullable(),privy_access_token:e.string().min(1).nullable(),refresh_token:e.string().min(1).nullable(),identity_token:e.string().min(1).optional(),is_new_user:e.boolean().optional(),oauth_tokens:R.optional(),oauth_provider_tokens:e.object({provider:e.string(),access_token:e.string(),access_token_expires_in_seconds:e.number().optional(),refresh_token:e.string().optional(),scopes:e.array(e.string()).optional()}).optional(),session_update_action:T}),Y=e.object({user:e.null(),token:e.null(),refresh_token:e.null(),session_update_action:e.literal(T.Values.clear)}),Z=e.union([X,Y]);export{C as AppleOauthAccount,X as AuthenticatedUser,J as AuthorizationKeyAccount,s as BaseWalletAccount,v as BitcoinSegwitEmbeddedWalletAccount,y as BitcoinTaprootEmbeddedWalletAccount,H as CrossAppAccount,F as CrossAppEmbeddedWallet,G as CrossAppSmartWallet,j as CurveSigningEmbeddedWalletAccount,E as CustomJwtAccount,Q as CustomMetadata,D as CustomOauthAccount,z as DiscordOauthAccount,n as EmailAccount,o as EthereumAccount,f as EthereumEmbeddedWalletAccount,b as FarcasterAccount,N as GithubOauthAccount,k as GoogleOauthAccount,V as InstagramOauthAccount,A as LineOauthAccount,K as LinkedAccount,I as LinkedInOauthAccount,P as LinkedMfaMethod,Y as LoggedOutUser,Z as MaybeUser,R as OAuthTokens,m as PasskeyAccount,O as PasskeyMfaMethod,a as PhoneAccount,T as SessionUpdateActionEnum,u as SmartWalletAccount,L as SmsMfaMethod,_ as SolanaAccount,g as SolanaEmbeddedWalletAccount,U as SpotifyOauthAccount,p as TelegramAccount,q as TiktokOauthAccount,M as TotpMfaMethod,B as TwitchOauthAccount,x as TwitterOauthAccount,w as UnifiedWalletAccount,S as User,W as UserWithIdentityToken};
