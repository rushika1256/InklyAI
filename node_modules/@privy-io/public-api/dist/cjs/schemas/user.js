"use strict";var e=require("zod"),t=require("./core.js"),r=require("./oauth-custom.js"),i=require("./smart-wallet-config.js"),l=require("./wallet-api/wallets/index.js");require("bs58"),require("libphonenumber-js/max"),require("viem"),require("../constants/smart-wallets.js"),require("@privy-io/api-base"),require("./api.js"),require("./transaction.js"),require("./wallet-api/export.js"),require("./wallet-api/wallets/spark/index.js"),require("./wallet-api/wallets/spark/utils.js");const n=e.z.object({type:e.z.literal("email"),address:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),a=e.z.object({type:e.z.literal("phone"),number:e.z.string().optional(),phoneNumber:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),s=e.z.object({type:e.z.enum(["wallet","smart_wallet"]),address:e.z.string(),chain_type:e.z.enum(["solana","ethereum"])}),o=e.z.object({type:e.z.literal("wallet"),address:e.z.string(),chain_id:e.z.string().optional(),chain_type:e.z.literal("ethereum"),wallet_client:e.z.literal("unknown"),wallet_client_type:e.z.string().optional(),connector_type:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),u=e.z.object({type:e.z.literal("smart_wallet"),address:e.z.string(),smart_wallet_type:i.SmartWalletProvider,smart_wallet_version:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),z=e.z.object({type:e.z.literal("wallet"),address:e.z.string(),chain_type:e.z.literal("solana"),wallet_client:e.z.literal("unknown"),wallet_client_type:e.z.string().optional(),connector_type:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),_=e.z.object({type:e.z.literal("farcaster"),fid:e.z.number(),owner_address:t.WalletAddress,username:e.z.string().optional(),display_name:e.z.string().optional(),bio:e.z.string().optional(),profile_picture:e.z.string().optional(),profile_picture_url:e.z.string().optional(),homepage_url:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable(),signer_public_key:e.z.string().optional()}),b=e.z.object({type:e.z.literal("passkey"),created_with_browser:e.z.string().optional(),created_with_os:e.z.string().optional(),created_with_device:e.z.string().optional(),credential_id:e.z.string(),authenticator_name:e.z.string().optional(),public_key:e.z.string().optional(),enrolled_in_mfa:e.z.boolean(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),c=e.z.object({type:e.z.literal("telegram"),telegram_user_id:e.z.string(),first_name:e.z.string().nullish(),last_name:e.z.string().nullish(),username:e.z.string().nullish(),photo_url:e.z.string().nullish(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}).transform((e=>({...e,telegramUserId:e.telegram_user_id,...void 0!==e.first_name?{firstName:e.first_name}:{}})));let p=e.z.enum(["privy","user-passcode","google-drive","icloud","recovery-encryption-key","privy-v2"]),m=e.z.object({id:e.z.string().nullable().default(null),type:e.z.literal("wallet"),address:e.z.string(),imported:e.z.boolean().default(!1),delegated:e.z.boolean().default(!1),wallet_index:e.z.number(),chain_id:e.z.string(),chain_type:e.z.string(),wallet_client:e.z.literal("privy"),wallet_client_type:e.z.literal("privy"),connector_type:e.z.literal("embedded"),recovery_method:p,verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()});const d=m.merge(e.z.object({chain_type:e.z.literal("ethereum")})),g=m.merge(e.z.object({chain_type:e.z.literal("solana"),public_key:e.z.string()})),f=m.merge(e.z.object({chain_type:e.z.literal("bitcoin-segwit"),public_key:e.z.string()})),v=m.merge(e.z.object({chain_type:e.z.literal("bitcoin-taproot"),public_key:e.z.string()})),y=m.merge(e.z.object({chain_type:l.CurveSigningChainTypes,public_key:e.z.string()}));let h=e.z.object({id:e.z.string(),recovery_method:e.z.literal("privy-v2")});const j=e.z.union([d.merge(h),g.merge(h),f.merge(h),v.merge(h),y.merge(h)]),x=e.z.object({type:e.z.literal("google_oauth"),subject:e.z.string(),email:e.z.string(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),k=e.z.object({type:e.z.literal("twitter_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),profile_picture_url:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),w=e.z.object({type:e.z.literal("discord_oauth"),subject:e.z.string(),username:e.z.string().nullable(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),A=e.z.object({type:e.z.literal("github_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),q=e.z.object({type:e.z.literal("linkedin_oauth"),subject:e.z.string(),name:e.z.string().optional(),email:e.z.string().nullable(),vanity_name:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),O=e.z.object({type:e.z.literal("spotify_oauth"),subject:e.z.string(),email:e.z.string().nullable(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),W=e.z.object({type:e.z.literal("instagram_oauth"),subject:e.z.string(),username:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),S=e.z.object({type:e.z.literal("tiktok_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),C=e.z.object({type:e.z.literal("line_oauth"),subject:e.z.string(),name:e.z.string().nullable(),email:e.z.string().nullable(),profile_picture_url:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),E=e.z.object({type:e.z.literal("twitch_oauth"),subject:e.z.string(),username:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),M=e.z.object({type:e.z.literal("apple_oauth"),subject:e.z.string(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),T=e.z.object({type:r.CustomOAuthProviderID,subject:e.z.string(),name:e.z.string().optional(),username:e.z.string().optional(),email:e.z.string().optional(),profile_picture_url:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),U=e.z.object({type:e.z.literal("custom_auth"),custom_user_id:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),I=e.z.object({address:e.z.string()}),L=e.z.object({address:e.z.string()}),P=e.z.object({type:e.z.literal("cross_app"),subject:e.z.string(),provider_app_id:e.z.string(),embedded_wallets:e.z.array(I),smart_wallets:e.z.array(L),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),B=e.z.object({type:e.z.literal("authorization_key"),public_key:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),D=e.z.union([n,a,o,z,u,d,g,f,v,y,x,k,w,A,O,W,S,C,E,q,M,T,U,_,b,c,P,B]),G=e.z.object({type:e.z.literal("sms"),verified_at:e.z.number()}),N=e.z.object({type:e.z.literal("totp"),verified_at:e.z.number()}),F=e.z.object({type:e.z.literal("passkey"),verified_at:e.z.number()}),J=e.z.union([G,N,F]),K=e.z.record(e.z.string(),e.z.union([e.z.string(),e.z.number(),e.z.boolean()])),V=e.z.object({provider:e.z.string(),access_token:e.z.string(),access_token_expires_in_seconds:e.z.number().optional(),refresh_token:e.z.string().optional(),refresh_token_expires_in_seconds:e.z.number().optional(),scopes:e.z.array(e.z.string()).optional()}),H=e.z.object({id:e.z.string(),linked_accounts:e.z.array(D),mfa_methods:e.z.array(J),created_at:e.z.number(),has_accepted_terms:e.z.boolean(),is_guest:e.z.boolean(),custom_metadata:K.optional()}),Q=e.z.enum(["set","ignore","clear"]),R=e.z.object({user:H,identity_token:e.z.string().min(1).nullable()}),X=e.z.object({user:H,token:e.z.string().min(1).nullable(),privy_access_token:e.z.string().min(1).nullable(),refresh_token:e.z.string().min(1).nullable(),identity_token:e.z.string().min(1).optional(),is_new_user:e.z.boolean().optional(),oauth_tokens:V.optional(),oauth_provider_tokens:e.z.object({provider:e.z.string(),access_token:e.z.string(),access_token_expires_in_seconds:e.z.number().optional(),refresh_token:e.z.string().optional(),scopes:e.z.array(e.z.string()).optional()}).optional(),session_update_action:Q}),Y=e.z.object({user:e.z.null(),token:e.z.null(),refresh_token:e.z.null(),session_update_action:e.z.literal(Q.Values.clear)}),Z=e.z.union([X,Y]);exports.AppleOauthAccount=M,exports.AuthenticatedUser=X,exports.AuthorizationKeyAccount=B,exports.BaseWalletAccount=s,exports.BitcoinSegwitEmbeddedWalletAccount=f,exports.BitcoinTaprootEmbeddedWalletAccount=v,exports.CrossAppAccount=P,exports.CrossAppEmbeddedWallet=I,exports.CrossAppSmartWallet=L,exports.CurveSigningEmbeddedWalletAccount=y,exports.CustomJwtAccount=U,exports.CustomMetadata=K,exports.CustomOauthAccount=T,exports.DiscordOauthAccount=w,exports.EmailAccount=n,exports.EthereumAccount=o,exports.EthereumEmbeddedWalletAccount=d,exports.FarcasterAccount=_,exports.GithubOauthAccount=A,exports.GoogleOauthAccount=x,exports.InstagramOauthAccount=W,exports.LineOauthAccount=C,exports.LinkedAccount=D,exports.LinkedInOauthAccount=q,exports.LinkedMfaMethod=J,exports.LoggedOutUser=Y,exports.MaybeUser=Z,exports.OAuthTokens=V,exports.PasskeyAccount=b,exports.PasskeyMfaMethod=F,exports.PhoneAccount=a,exports.SessionUpdateActionEnum=Q,exports.SmartWalletAccount=u,exports.SmsMfaMethod=G,exports.SolanaAccount=z,exports.SolanaEmbeddedWalletAccount=g,exports.SpotifyOauthAccount=O,exports.TelegramAccount=c,exports.TiktokOauthAccount=S,exports.TotpMfaMethod=N,exports.TwitchOauthAccount=E,exports.TwitterOauthAccount=k,exports.UnifiedWalletAccount=j,exports.User=H,exports.UserWithIdentityToken=R;
